<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BeBuddy – analyseværktøj til Be18</title>
  <meta name="description" content="BeBuddy supplerer energirammeberegninger i Be18 med statistik for at estimere fremtidigt energiforbrug. Gratis, open source og anvendes på eget ansvar."/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f5f7ee;
      --card:#ffffff;
      --text:#1f2937;
      --muted:#4b5563;
      --accent:#7b8e33;
      --accent-2:#b3bf6d;
      --ring: rgba(123,142,51,.2);
      --shadow: 0 10px 25px rgba(0,0,0,.06);
      --radius: 16px;
      scroll-behavior: smooth;
    }
    *{box-sizing:border-box}
    html,body{margin:0; padding:0; font-family:"Inter", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; color:var(--text); background:var(--bg)}
    a{color:var(--accent); text-decoration:underline; text-underline-offset:2px}
    img{max-width:100%; height:auto}
    .container{max-width:1100px; margin:0 auto; padding:0 24px}
    header.site{position:sticky; top:0; z-index:40; background:rgba(245,247,238,.9); backdrop-filter:saturate(180%) blur(8px); border-bottom:1px solid #e8ecd7}
    .nav{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:14px 0}
    .brand{display:flex; align-items:center; gap:12px; font-weight:700; letter-spacing:.2px}
    .brand .logo{width:40px; height:40px; border-radius:50%; object-fit:cover; aspect-ratio:1/1}
    .brand span{font-size:18px}
    .links{display:flex; align-items:center; gap:18px}
    .links a{color:var(--text); text-decoration:none; font-weight:500; opacity:.9}
    .links a:hover{color:var(--accent)}
    .cta{display:flex; gap:10px}
    .btn{appearance:none; border:none; border-radius:999px; padding:10px 16px; font-weight:600; cursor:pointer; transition:.2s transform, .2s box-shadow; box-shadow:var(--shadow)}
    .btn:focus{outline:3px solid var(--ring)}
    .btn.primary{background:var(--accent); color:#fff; text-decoration:none}
    .btn.secondary{background:var(--card); color:var(--text); border:1px solid #e5e7eb; text-decoration:none}
    .btn:hover{transform:translateY(-1px)}
    section{scroll-margin-top:90px}
    .hero{padding:64px 0 40px}
    .hero .grid{display:grid; grid-template-columns:1.1fr .9fr; gap:40px; align-items:center}
    .kicker{display:inline-block; padding:6px 10px; border-radius:999px; background:#eef3d2; color:#59610f; font-weight:600; font-size:12px; letter-spacing:.4px; text-transform:uppercase}
    h1{margin:14px 0 10px; font-size:40px; line-height:1.1}
    .lede{font-size:18px; color:var(--muted); max-width:70ch}
    .hero-card{background:var(--card); border:1px solid #edf0e1; padding:22px; border-radius:var(--radius)}
    .disclaimer{font-size:14px; color:var(--muted)}
    .features{padding:50px 0}
    h2{font-size:28px; margin:0 0 14px}
    .sub{color:var(--muted); margin-bottom:24px}
    .cards{display:grid; grid-template-columns:repeat(2,1fr); gap:18px}
    .card{background:var(--card); border:1px solid #edf0e1; padding:22px; border-radius:var(--radius); box-shadow:var(--shadow)}
    .card h3{margin:2px 0 6px}
    .badge{display:inline-flex; align-items:center; gap:8px; font-size:12px; font-weight:600; color:#455016}
    .badge svg{width:16px; height:16px}
    .steps{padding:16px 0 50px}
    .step-grid{display:grid; grid-template-columns:repeat(4,1fr); gap:16px}
    .step{background:var(--card); border:1px solid #edf0e1; border-radius:var(--radius); padding:18px}
    .num{width:30px; height:30px; border-radius:50%; background:var(--accent); color:#fff; display:inline-grid; place-items:center; font-weight:800; margin-bottom:10px}
    .benefits{padding:12px 0 60px}
    .benefit-grid{display:grid; grid-template-columns:repeat(2,1fr); gap:16px}
    .benefit{background:var(--card); border:1px solid #edf0e1; border-radius:var(--radius); padding:18px; display:flex; gap:12px}
    .tick{flex:0 0 22px; height:22px; border-radius:50%; background:#eaf1c7; display:grid; place-items:center}
    footer{background:#eef3d2; border-top:1px solid #dfe5bd; padding:28px 0; color:#3d4519}
    .footer-grid{display:grid; grid-template-columns:1.2fr .8fr; gap:18px; align-items:center}
    .small{font-size:14px}
    @media (max-width: 900px){
      .hero .grid{grid-template-columns:1fr}
      .cards{grid-template-columns:1fr}
      .step-grid{grid-template-columns:1fr 1fr}
      .benefit-grid{grid-template-columns:1fr}
      .links{display:none}
    }

    /* --- POP-UP STYLING --- */
    .bb-toast{
      position: fixed;
      right: 20px;
      bottom: 20px;
      max-width: 420px;
      background: var(--card);
      color: var(--text);
      border: 1px solid #edf0e1;
      border-left: 6px solid var(--accent);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px 44px 14px 14px;
      line-height: 1.35;
      z-index: 1000;
      opacity: 0;
      transform: translateY(8px);
      transition: opacity .18s ease, transform .18s ease;
    }
    .bb-toast.show{ opacity: 1; transform: translateY(0); }
    .bb-toast strong{ display:block; margin-bottom: 4px; }
    .bb-toast .bb-toast-close{
      position:absolute; top:8px; right:8px;
      width:28px; height:28px; border-radius:999px;
      border:1px solid #e5e7eb; background:#fff; cursor:pointer;
      font-weight:700; line-height:1; display:grid; place-items:center;
      box-shadow: var(--shadow);
    }
    .bb-toast .bb-toast-close:focus{ outline:3px solid var(--ring); }
    @media (max-width: 520px){
      .bb-toast{ left: 16px; right: 16px; bottom: 16px; }
    }
    @media (prefers-reduced-motion: reduce){
      .bb-toast{ transition: none; }
    }
  </style>
</head>
<body>
  <header class="site" aria-label="Hovednavigation">
    <div class="container nav">
      <div class="brand">
        <img class="logo" src="/logo.png" alt="BeBuddy logo" />
        <span>BeBuddy</span>
      </div>
      <nav class="links" aria-label="Sektioner på siden">
        <a href="#funktioner">Funktioner</a>
        <a href="#saadan">Sådan gør du</a>
        <a href="#fordele">Fordele</a>
        <a href="#kontakt">Kontakt</a>
      </nav>
      <div class="cta">
        <a class="btn secondary" href="#principper">Principper</a>
        <a
          class="btn primary"
          href="https://github.com/bebuddyDK/bebuddy-site/releases/download/v2.0/bebuddy_v2.0.zip"
          data-dl="bebuddy_v2.0.zip"
          data-asset="https://github.com/bebuddyDK/bebuddy-site/releases/download/v2.0/bebuddy_v2.0.zip"
        >Download v2.0</a>
      </div>
    </div>
  </header>

  <main>
    <!-- ... (alt indhold som før) ... -->
    <!-- Jeg springer over mellemsektionerne for korthed, men de er uændrede -->
    <!-- HOW IT WORKS, FEATURES, BENEFITS, osv. -->

    <!-- Admin (skjult) -->
    <section id="admin-stats" class="container" hidden style="padding:20px 0">
      <div class="card">
        <h2 style="margin-top:0">Downloads (admin)</h2>
        <p class="sub">Antal downloads af BeBuddy</p>
        <div id="statsTable" style="overflow:auto"></div>
      </div>
    </section>

    <script>
    (function(){
      const qs = new URLSearchParams(location.search);
      const panel = document.getElementById('admin-stats');
      function showPanel(){ panel.hidden = false; loadStats(); }
      function loadStats(){
        fetch('/api/stats').then(r => r.json()).then(({downloads=[]}) => {
          const rows = downloads.map(d =>
            `<tr>
               <td>${d.file}</td>
               <td style="text-align:center">${d.count}</td>
               <td style="text-align:center">${d.last_at || ''}</td>
             </tr>`).join('');
          document.getElementById('statsTable').innerHTML =
            `<table style="width:100%; border-collapse:collapse">
              <thead><tr>
                <th style="text-align:left; border-bottom:1px solid #e5e7eb">Fil</th>
                <th style="text-align:center; border-bottom:1px solid #e5e7eb">Antal</th>
                <th style="text-align:center; border-bottom:1px solid #e5e7eb">Seneste</th>
              </tr></thead>
              <tbody>${rows || '<tr><td colspan="3">Ingen data endnu.</td></tr>'}</tbody>
            </table>`;
        }).catch(()=>{
          document.getElementById('statsTable').textContent='Kunne ikke hente stats.';
        });
      }
      if(qs.has('admin')) showPanel();
      document.addEventListener('keydown', (e)=>{
        if(e.shiftKey && (e.key==='D' || e.key==='d')){
          panel.hidden ? showPanel() : (panel.hidden = true);
        }
      });
    })();
    </script>

    <!-- tælle + direkte download -->
    <script src="/get/bebuddy_count.js" defer></script>
  </main>

  <footer id="kontakt" aria-label="Sidefod">
    <div class="container footer-grid">
      <div>
        <strong>BeBuddy</strong>
        <p class="small">Udviklet i forbindelse med et Masterprojekt på Aarhus Universitet i 2025 af Anne Juul Meldgaard og Esther Kerrn-Jespersen i samarbejde med Professor Steffen Petersen.</p>
        <p class="small">Kontakt: <a href="mailto:kontakt.bebuddy@gmail.com">kontakt.bebuddy@gmail.com</a></p>
      </div>
      <div class="small" style="justify-self:end; text-align:right">
        <p>© 2025 – Gratis version (v.2.0). Anvendes på eget ansvar.</p>
        <p><a href="#top">Til toppen af siden ↑</a></p>
      </div>
    </div>
  </footer>

  <!-- POP-UP ELEMENT -->
  <div id="weatherNotice"
       class="bb-toast"
       role="dialog"
       aria-live="polite"
       aria-label="Vigtig information"
       hidden>
    <button type="button"
            class="bb-toast-close"
            aria-label="Luk meddelelse">×</button>
    <strong>BeBuddy featuren: Vejranalyse</strong>
    Vejranalyse er under videre arbejde, og bør ikke anvendes for nu.
  </div>

  <!-- POP-UP SCRIPT -->
  <script>
  (function(){
    const KEY = 'bb-weather-notice-dismissed-v1';
    const el = document.getElementById('weatherNotice');
    if(!el) return;

    if(!localStorage.getItem(KEY)){
      el.hidden = false;
      requestAnimationFrame(()=> el.classList.add('show'));
    } else {
      el.hidden = true;
    }

    const btn = el.querySelector('.bb-toast-close');
    btn?.addEventListener('click', ()=>{
      el.classList.remove('show');
      setTimeout(()=> el.hidden = true, 200);
      localStorage.setItem(KEY, '1');
    });
  })();
  </script>
</body>
</html>
